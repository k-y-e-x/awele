                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.0.7 #12016 (Mac OS X x86_64)
                                      4 ;--------------------------------------------------------
                                      5 	.module awele
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _main
                                     12 	.globl _initPlateau
                                     13 	.globl _affPlateau
                                     14 	.globl _initJoystick
                                     15 	.globl _choixJoueur
                                     16 	.globl _effacerAttente
                                     17 	.globl _afficherAttente
                                     18 	.globl _afficherPosEval
                                     19 	.globl _afficherResultats
                                     20 	.globl _menuOptions
                                     21 	.globl _alphabeta
                                     22 	.globl _jouer
                                     23 	.globl _jeuPoss
                                     24 	.globl _j
                                     25 	.globl _tab
                                     26 	.globl _prof
                                     27 	.globl _jeu
                                     28 ;--------------------------------------------------------
                                     29 ; special function registers
                                     30 ;--------------------------------------------------------
                                     31 ;--------------------------------------------------------
                                     32 ; ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area _DATA
      000000                         35 _jeu::
      000000                         36 	.ds 18
      000012                         37 _prof::
      000012                         38 	.ds 2
      000014                         39 _tab::
      000014                         40 	.ds 20
      000028                         41 _j::
      000028                         42 	.ds 2
                                     43 ;--------------------------------------------------------
                                     44 ; absolute external ram data
                                     45 ;--------------------------------------------------------
                                     46 	.area _DABS (ABS)
                                     47 ;--------------------------------------------------------
                                     48 ; global & static initialisations
                                     49 ;--------------------------------------------------------
                                     50 	.area _HOME
                                     51 	.area _GSINIT
                                     52 	.area _GSFINAL
                                     53 	.area _GSINIT
                                     54 ;--------------------------------------------------------
                                     55 ; Home
                                     56 ;--------------------------------------------------------
                                     57 	.area _HOME
                                     58 	.area _HOME
                                     59 ;--------------------------------------------------------
                                     60 ; code
                                     61 ;--------------------------------------------------------
                                     62 	.area _CODE
                                     63 ;src/awele.c:22: void main (void)
                                     64 ;	---------------------------------
                                     65 ; Function main
                                     66 ; ---------------------------------
      000000                         67 _main::
      000000 E8 FC                   68 	add	sp, #-4
                                     69 ;src/awele.c:27: BOOL b, fin = FALSE;
      000002 AF                      70 	xor	a, a
      000003 F8 02                   71 	ldhl	sp,	#2
      000005 22                      72 	ld	(hl+), a
      000006 77                      73 	ld	(hl), a
                                     74 ;src/awele.c:28: posEval = 0;
      000007 21r00r00                75 	ld	hl, #_posEval
      00000A 3E 00                   76 	ld	a, #0x00
      00000C 22                      77 	ld	(hl+), a
      00000D 36 00                   78 	ld	(hl), #0x00
                                     79 ;src/awele.c:31: initJoystick();    
      00000F CDr00r00                80 	call	_initJoystick
                                     81 ;src/awele.c:32: initPlateau();
      000012 CDr00r00                82 	call	_initPlateau
                                     83 ;src/awele.c:34: for(i=0;i<NCASES;i++)
      000015 0E 00                   84 	ld	c, #0x00
      000017                         85 00115$:
                                     86 ;src/awele.c:35: jeu[NCASES+1+i] = jeu[i] = NGRAINS;
      000017 79                      87 	ld	a, c
      000018 C6 09                   88 	add	a, #0x09
      00001A 5F                      89 	ld	e, a
      00001B 17                      90 	rla
      00001C 9F                      91 	sbc	a, a
      00001D 57                      92 	ld	d, a
      00001E 21r00r00                93 	ld	hl, #_jeu
      000021 19                      94 	add	hl, de
      000022 5D                      95 	ld	e, l
      000023 54                      96 	ld	d, h
      000024 21r00r00                97 	ld	hl, #_jeu
      000027 06 00                   98 	ld	b, #0x00
      000029 09                      99 	add	hl, bc
      00002A 3E 04                  100 	ld	a,#0x04
      00002C 77                     101 	ld	(hl),a
      00002D 12                     102 	ld	(de), a
                                    103 ;src/awele.c:34: for(i=0;i<NCASES;i++)
      00002E 0C                     104 	inc	c
      00002F 79                     105 	ld	a, c
      000030 D6 08                  106 	sub	a, #0x08
      000032 38 E3                  107 	jr	C, 00115$
                                    108 ;src/awele.c:37: jeu[KALAH2] = jeu[KALAH1] = 0;
      000034 21r08r00               109 	ld	hl, #(_jeu + 0x0008)
      000037 36 00                  110 	ld	(hl), #0x00
      000039 21r11r00               111 	ld	hl, #(_jeu + 0x0011)
      00003C 36 00                  112 	ld	(hl), #0x00
                                    113 ;src/awele.c:39: i=menuOptions(); 
      00003E CDr00r00               114 	call	_menuOptions
      000041 F8 00                  115 	ldhl	sp,	#0
      000043 73                     116 	ld	(hl), e
                                    117 ;src/awele.c:41: affPlateau(jeu);
      000044 21r00r00               118 	ld	hl, #_jeu
      000047 E5                     119 	push	hl
      000048 CDr00r00               120 	call	_affPlateau
      00004B E8 02                  121 	add	sp, #2
                                    122 ;src/awele.c:43: while( !fin )
      00004D                        123 00112$:
      00004D F8 03                  124 	ldhl	sp,	#3
      00004F 3A                     125 	ld	a, (hl-)
      000050 B6                     126 	or	a, (hl)
      000051 C2r6Er01               127 	jp	NZ, 00114$
                                    128 ;src/awele.c:45: if(jeuPoss(jeu, i))
      000054 2B                     129 	dec	hl
      000055 2B                     130 	dec	hl
      000056 7E                     131 	ld	a, (hl)
      000057 F5                     132 	push	af
      000058 33                     133 	inc	sp
      000059 21r00r00               134 	ld	hl, #_jeu
      00005C E5                     135 	push	hl
      00005D CDr00r00               136 	call	_jeuPoss
      000060 E8 03                  137 	add	sp, #3
      000062 4B                     138 	ld	c, e
                                    139 ;src/awele.c:59: afficherAttente(i+1,tab[c]);
      000063 F8 00                  140 	ldhl	sp,	#0
      000065 2A                     141 	ld	a, (hl+)
      000066 77                     142 	ld	(hl), a
                                    143 ;src/awele.c:45: if(jeuPoss(jeu, i))
      000067 79                     144 	ld	a, c
      000068 B7                     145 	or	a, a
      000069 CAr5Dr01               146 	jp	Z, 00110$
                                    147 ;src/awele.c:48: if( j[i] )
                                    148 ;c
      00006C 11r28r00               149 	ld	de, #_j
      00006F 2B                     150 	dec	hl
      000070 6E                     151 	ld	l, (hl)
      000071 26 00                  152 	ld	h, #0x00
      000073 19                     153 	add	hl, de
      000074 4E                     154 	ld	c, (hl)
                                    155 ;src/awele.c:59: afficherAttente(i+1,tab[c]);
      000075 F8 01                  156 	ldhl	sp,	#1
      000077 7E                     157 	ld	a, (hl)
      000078 3C                     158 	inc	a
      000079 23                     159 	inc	hl
      00007A 77                     160 	ld	(hl), a
                                    161 ;src/awele.c:48: if( j[i] )
      00007B 79                     162 	ld	a, c
      00007C B7                     163 	or	a, a
      00007D CAr10r01               164 	jp	Z, 00103$
                                    165 ;src/awele.c:51: posEval=0;
      000080 21r00r00               166 	ld	hl, #_posEval
      000083 3E 00                  167 	ld	a, #0x00
      000085 22                     168 	ld	(hl+), a
      000086 36 00                  169 	ld	(hl), #0x00
                                    170 ;src/awele.c:52: afficherPosEval();
      000088 CDr00r00               171 	call	_afficherPosEval
                                    172 ;src/awele.c:53: alphabeta(jeu, MOINS_INFINI, PLUS_INFINI, i, prof[i], 0, tab);
      00008B 01r14r00               173 	ld	bc, #_tab
                                    174 ;c
      00008E 11r12r00               175 	ld	de, #_prof
      000091 F8 00                  176 	ldhl	sp,	#0
      000093 6E                     177 	ld	l, (hl)
      000094 26 00                  178 	ld	h, #0x00
      000096 19                     179 	add	hl, de
      000097 5D                     180 	ld	e, l
      000098 54                     181 	ld	d, h
      000099 1A                     182 	ld	a, (de)
      00009A C5                     183 	push	bc
      00009B 26 00                  184 	ld	h, #0x00
      00009D E5                     185 	push	hl
      00009E 33                     186 	inc	sp
      00009F F5                     187 	push	af
      0000A0 33                     188 	inc	sp
      0000A1 F8 04                  189 	ldhl	sp,	#4
      0000A3 7E                     190 	ld	a, (hl)
      0000A4 F5                     191 	push	af
      0000A5 33                     192 	inc	sp
      0000A6 21 E8 03               193 	ld	hl, #0x03e8
      0000A9 E5                     194 	push	hl
      0000AA 21 18 FC               195 	ld	hl, #0xfc18
      0000AD E5                     196 	push	hl
      0000AE 21r00r00               197 	ld	hl, #_jeu
      0000B1 E5                     198 	push	hl
      0000B2 CDr00r00               199 	call	_alphabeta
      0000B5 E8 0B                  200 	add	sp, #11
                                    201 ;src/awele.c:54: afficherPosEval();
      0000B7 CDr00r00               202 	call	_afficherPosEval
                                    203 ;src/awele.c:55: for(c=0,b=1;b;c++)
      0000BA 11 01 00               204 	ld	de, #0x0001
      0000BD AF                     205 	xor	a, a
      0000BE F8 03                  206 	ldhl	sp,	#3
      0000C0 77                     207 	ld	(hl), a
      0000C1                        208 00118$:
      0000C1 7A                     209 	ld	a, d
      0000C2 B3                     210 	or	a, e
      0000C3 28 79                  211 	jr	Z, 00108$
                                    212 ;src/awele.c:57: b = jouer(jeu, jeu, tab[c], i);
      0000C5 F8 03                  213 	ldhl	sp,	#3
      0000C7 7E                     214 	ld	a, (hl)
      0000C8 F5                     215 	push	af
      0000C9 17                     216 	rla
      0000CA 9F                     217 	sbc	a, a
      0000CB 47                     218 	ld	b, a
      0000CC F1                     219 	pop	af
      0000CD C6r14                  220 	add	a, #<(_tab)
      0000CF 4F                     221 	ld	c, a
      0000D0 78                     222 	ld	a, b
      0000D1 CEs00                  223 	adc	a, #>(_tab)
      0000D3 47                     224 	ld	b, a
      0000D4 0A                     225 	ld	a, (bc)
      0000D5 C5                     226 	push	bc
      0000D6 F8 02                  227 	ldhl	sp,	#2
      0000D8 66                     228 	ld	h, (hl)
      0000D9 E5                     229 	push	hl
      0000DA 33                     230 	inc	sp
      0000DB F5                     231 	push	af
      0000DC 33                     232 	inc	sp
      0000DD 21r00r00               233 	ld	hl, #_jeu
      0000E0 E5                     234 	push	hl
      0000E1 E5                     235 	push	hl
      0000E2 CDr00r00               236 	call	_jouer
      0000E5 E8 06                  237 	add	sp, #6
      0000E7 C1                     238 	pop	bc
      0000E8 7B                     239 	ld	a, e
      0000E9 17                     240 	rla
      0000EA 9F                     241 	sbc	a, a
      0000EB 57                     242 	ld	d, a
                                    243 ;src/awele.c:58: affPlateau(jeu);
      0000EC C5                     244 	push	bc
      0000ED D5                     245 	push	de
      0000EE 21r00r00               246 	ld	hl, #_jeu
      0000F1 E5                     247 	push	hl
      0000F2 CDr00r00               248 	call	_affPlateau
      0000F5 E8 02                  249 	add	sp, #2
      0000F7 D1                     250 	pop	de
      0000F8 C1                     251 	pop	bc
                                    252 ;src/awele.c:59: afficherAttente(i+1,tab[c]);
      0000F9 0A                     253 	ld	a, (bc)
      0000FA D5                     254 	push	de
      0000FB F5                     255 	push	af
      0000FC 33                     256 	inc	sp
      0000FD F8 05                  257 	ldhl	sp,	#5
      0000FF 7E                     258 	ld	a, (hl)
      000100 F5                     259 	push	af
      000101 33                     260 	inc	sp
      000102 CDr00r00               261 	call	_afficherAttente
      000105 E8 02                  262 	add	sp, #2
      000107 CDr00r00               263 	call	_effacerAttente
      00010A D1                     264 	pop	de
                                    265 ;src/awele.c:55: for(c=0,b=1;b;c++)
      00010B F8 03                  266 	ldhl	sp,	#3
      00010D 34                     267 	inc	(hl)
      00010E 18 B1                  268 	jr	00118$
                                    269 ;src/awele.c:66: do
      000110                        270 00103$:
                                    271 ;src/awele.c:68: c = choixJoueur(i);
      000110 F8 00                  272 	ldhl	sp,	#0
      000112 7E                     273 	ld	a, (hl)
      000113 F5                     274 	push	af
      000114 33                     275 	inc	sp
      000115 CDr00r00               276 	call	_choixJoueur
      000118 33                     277 	inc	sp
      000119 7B                     278 	ld	a, e
                                    279 ;src/awele.c:69: b = jouer(jeu, jeu, c, i);
      00011A F8 00                  280 	ldhl	sp,	#0
      00011C 66                     281 	ld	h, (hl)
      00011D E5                     282 	push	hl
      00011E 33                     283 	inc	sp
      00011F F5                     284 	push	af
      000120 33                     285 	inc	sp
      000121 21r00r00               286 	ld	hl, #_jeu
      000124 E5                     287 	push	hl
      000125 E5                     288 	push	hl
      000126 CDr00r00               289 	call	_jouer
      000129 E8 06                  290 	add	sp, #6
      00012B 7B                     291 	ld	a, e
      00012C 17                     292 	rla
      00012D 9F                     293 	sbc	a, a
      00012E 57                     294 	ld	d, a
                                    295 ;src/awele.c:70: affPlateau(jeu);
      00012F D5                     296 	push	de
      000130 21r00r00               297 	ld	hl, #_jeu
      000133 E5                     298 	push	hl
      000134 CDr00r00               299 	call	_affPlateau
      000137 E8 02                  300 	add	sp, #2
      000139 D1                     301 	pop	de
                                    302 ;src/awele.c:71: } while(b);
      00013A 7A                     303 	ld	a, d
      00013B B3                     304 	or	a, e
      00013C 20 D2                  305 	jr	NZ, 00103$
      00013E                        306 00108$:
                                    307 ;src/awele.c:74: fin = (jeu[(i+1)*NCASES+i] > NCASES*NGRAINS);
      00013E F8 02                  308 	ldhl	sp,	#2
      000140 7E                     309 	ld	a, (hl)
      000141 87                     310 	add	a, a
      000142 87                     311 	add	a, a
      000143 87                     312 	add	a, a
      000144 2B                     313 	dec	hl
      000145 86                     314 	add	a, (hl)
      000146 4F                     315 	ld	c, a
      000147 17                     316 	rla
      000148 9F                     317 	sbc	a, a
      000149 47                     318 	ld	b, a
      00014A 21r00r00               319 	ld	hl, #_jeu
      00014D 09                     320 	add	hl, bc
      00014E 4E                     321 	ld	c, (hl)
      00014F 3E 20                  322 	ld	a, #0x20
      000151 91                     323 	sub	a, c
      000152 3E 00                  324 	ld	a, #0x00
      000154 17                     325 	rla
      000155 F8 02                  326 	ldhl	sp,	#2
      000157 77                     327 	ld	(hl), a
      000158 AF                     328 	xor	a, a
      000159 23                     329 	inc	hl
      00015A 77                     330 	ld	(hl), a
      00015B 18 07                  331 	jr	00111$
      00015D                        332 00110$:
                                    333 ;src/awele.c:77: fin = TRUE;
      00015D F8 02                  334 	ldhl	sp,	#2
      00015F 36 01                  335 	ld	(hl), #0x01
      000161 AF                     336 	xor	a, a
      000162 23                     337 	inc	hl
      000163 77                     338 	ld	(hl), a
      000164                        339 00111$:
                                    340 ;src/awele.c:79: i=1-i;
      000164 3E 01                  341 	ld	a, #0x01
      000166 F8 01                  342 	ldhl	sp,	#1
      000168 96                     343 	sub	a, (hl)
      000169 2B                     344 	dec	hl
      00016A 77                     345 	ld	(hl), a
      00016B C3r4Dr00               346 	jp	00112$
      00016E                        347 00114$:
                                    348 ;src/awele.c:82: afficherResultats(jeu[KALAH1],jeu[KALAH2]);
      00016E FAr11r00               349 	ld	a, (#(_jeu + 0x0011) + 0)
      000171 21r08r00               350 	ld	hl, #(_jeu + 0x0008)
      000174 46                     351 	ld	b, (hl)
      000175 F5                     352 	push	af
      000176 33                     353 	inc	sp
      000177 C5                     354 	push	bc
      000178 33                     355 	inc	sp
      000179 CDr00r00               356 	call	_afficherResultats
      00017C E8 02                  357 	add	sp, #2
                                    358 ;src/awele.c:85: }
      00017E E8 04                  359 	add	sp, #4
      000180 C9                     360 	ret
                                    361 	.area _CODE
                                    362 	.area _CABS (ABS)
